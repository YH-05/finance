# Python開発スキル重複分析レポート

**生成日**: 2026-01-25
**対象**: .claude/skills/ および .claude/agents/ 内の全Python開発関連スキル

---

## エグゼクティブサマリー

### 主要な発見事項

- **合計スキル数**: 47スキル（うちPython開発関連: 13スキル）
- **重複の有無**: 明確な重複は少ないが、役割分担が不明確な領域あり
- **改善推奨**: 3つのスキルで役割を明確化し、2つのスキルで統合を検討

---

## Python開発関連スキル一覧

### カテゴリA: ナレッジベース（3スキル）

| スキル名 | 目的 | 主要機能 | プロアクティブ使用 |
|---------|------|---------|------------------|
| **coding-standards** | コーディング規約の提供 | PEP 695型ヒント、命名規則、Docstring、エラーメッセージ、ロギング | ✓ コード実装時 |
| **tdd-development** | TDD開発プロセスの提供 | Red→Green→Refactor、テスト命名規則、テスト種別、三角測量 | ✓ テスト作成時 |
| **error-handling** | エラーハンドリングパターンの提供 | シンプル/リッチパターン、リトライ戦略、ロギング統合 | ✓ エラー設計時 |

**特徴**:
- 読み取り専用のナレッジベース
- コード実装時にプロアクティブに参照される
- 重複なし

---

### カテゴリB: コード品質管理（4スキル）

| スキル名 | 目的 | 実行内容 | サブエージェント | 役割の違い |
|---------|------|---------|----------------|-----------|
| **ensure-quality** | 品質の自動改善 | ①品質修正→②コード整理の2フェーズ | quality-checker → code-simplifier | **修正実行** |
| **analyze** | 詳細な分析レポート出力 | コード・アーキテクチャ・セキュリティ・パフォーマンス分析 | code-analyzer | **分析のみ** |
| **improve** | エビデンスベースの改善実装 | 測定→改善→検証のサイクル | improvement-implementer | **改善実装** |
| **scan** | セキュリティと品質の検証 | OWASP Top 10準拠、脆弱性検出、スコアリング | security-scanner | **検証のみ** |

**役割分担**:

```
問題発見 → 分析 → 改善 → 検証
    ↓        ↓       ↓       ↓
  scan → analyze → improve → ensure-quality
  (検証)  (分析)   (改善)    (修正)
```

**重複評価**: 重複なし - 各スキルは異なるフェーズを担当

---

### カテゴリC: リファクタリング・デバッグ（2スキル）

| スキル名 | 目的 | 実行内容 | サブエージェント | 役割の違い |
|---------|------|---------|----------------|-----------|
| **safe-refactor** | 安全なリファクタリング | テストカバレッジ維持、段階的リファクタリング | quality-checker (検証モード) | リファクタリング特化 |
| **troubleshoot** | 体系的なデバッグ | 問題特定→原因分析→解決策実装→予防策 | debugger | デバッグ特化 |

**重複評価**: 重複なし - 目的が明確に異なる

---

### カテゴリD: レビュー（2スキル）

| スキル名 | 目的 | 実行内容 | サブエージェント数 | 並列実行 |
|---------|------|---------|------------------|---------|
| **review-pr** | PRの包括的レビュー | コード品質・セキュリティ・テスト | 7エージェント | ✓ |
| **review-docs** | ドキュメントレビュー | 完全性・具体性・一貫性・測定可能性 | doc-reviewer | - |

**重複評価**: 重複なし - 対象が異なる（コード vs ドキュメント）

---

### カテゴリE: ドキュメント作成（2スキル）

| スキル名 | 目的 | 実行内容 |
|---------|------|---------|
| **development-guidelines** | 開発ガイドライン作成 | コーディング規約と開発プロセス |
| **functional-design** | 機能設計書作成 | LRDを元に技術的な機能設計を詳細化 |
| **architecture-design** | アーキテクチャ設計書作成 | 技術スタックとシステム構造を定義 |
| **repository-structure** | リポジトリ構造定義書作成 | 具体的なディレクトリ構造を定義 |
| **glossary-creation** | 用語集作成 | ライブラリ固有の用語と技術用語を定義 |

**重複評価**: 重複なし - 各ドキュメントは異なる目的

---

## 重複分析結果

### 🟢 重複なし（問題なし）

以下のスキルペアは目的と役割が明確に異なる:

1. **coding-standards** vs **tdd-development** vs **error-handling**
   - 役割: 異なるナレッジ領域を担当
   - 重複度: 0%

2. **analyze** vs **scan**
   - analyze: 詳細分析レポート
   - scan: セキュリティ検証とスコアリング
   - 重複度: 10%（両方ともセキュリティチェックを含むが、目的が異なる）

3. **safe-refactor** vs **troubleshoot**
   - safe-refactor: 計画的なリファクタリング
   - troubleshoot: 問題発生時のデバッグ
   - 重複度: 0%

---

### 🟡 役割が曖昧な領域（改善推奨）

#### 1. ensure-quality vs improve

**現状**:
- **ensure-quality**: `make check-all`相当の自動修正 + コード整理
- **improve**: エビデンスベースの改善実装

**問題点**:
- 両方とも「改善実装」を行う
- ensure-qualityのフェーズ2（コード整理）とimproveの役割が重複する可能性

**重複度**: 30%

**推奨アクション**:
```yaml
役割の明確化案:
  ensure-quality:
    - フォーカス: 既存の品質基準への準拠（make check-all）
    - 範囲: フォーマット、リント、型チェック、テストの自動修正
    - 使用場面: PR作成前、CI/CD失敗時

  improve:
    - フォーカス: 品質の向上（エビデンスベース）
    - 範囲: パフォーマンス最適化、アーキテクチャ改善、DRY原則適用
    - 使用場面: 計画的な改善、リファクタリング
```

#### 2. analyze vs scan

**現状**:
- **analyze**: 多次元分析（コード品質・アーキテクチャ・セキュリティ・パフォーマンス）
- **scan**: セキュリティと品質の検証

**問題点**:
- 両方ともセキュリティチェックを含む
- analyzeは「分析レポート」、scanは「検証とスコアリング」だが、ユーザーには違いが不明瞭

**重複度**: 20%

**推奨アクション**:
```yaml
役割の明確化案:
  analyze:
    - フォーカス: 深い分析とレポート生成
    - 出力: YAML詳細レポート（改善ロードマップ含む）
    - 使用場面: 四半期レビュー、大規模リファクタリング前

  scan:
    - フォーカス: 素早い検証とスコアリング
    - 出力: セキュリティスコア + 脆弱性リスト
    - 使用場面: PRマージ前、リリース前、日次CI/CD
```

---

### 🔴 統合を検討すべきスキル（現時点ではなし）

現在のスキルセットには、統合すべき明確な重複は発見されませんでした。

---

## サブエージェント重複分析

### 使用されているサブエージェント一覧

| サブエージェント | 使用スキル | 役割 |
|----------------|-----------|------|
| quality-checker | ensure-quality, safe-refactor | 品質修正・検証 |
| code-simplifier | ensure-quality | コード整理 |
| code-analyzer | analyze | 多次元分析 |
| improvement-implementer | improve | 改善実装 |
| security-scanner | scan | セキュリティスキャン |
| debugger | troubleshoot | デバッグ |
| doc-reviewer | review-docs | ドキュメントレビュー |
| pr-readability | review-pr | 可読性レビュー |
| pr-design | review-pr | 設計レビュー |
| pr-performance | review-pr | パフォーマンスレビュー |
| pr-security-code | review-pr | コードセキュリティレビュー |
| pr-security-infra | review-pr | インフラセキュリティレビュー |
| pr-test-coverage | review-pr | テストカバレッジレビュー |
| pr-test-quality | review-pr | テスト品質レビュー |

**重複評価**:
- **quality-checker**が2つのスキルで使用されているが、モードが異なる（--auto-fix vs --validate-only）ため問題なし
- その他のエージェントは重複なし

---

## 推奨アクション

### 短期（1週間以内）

#### 1. スキルドキュメントの役割明確化

**対象**: ensure-quality, improve

**変更内容**:
```markdown
# ensure-quality/SKILL.md
役割: make check-all相当の自動修正
- フォーカス: 既存の品質基準への準拠
- 使用場面: PR作成前、CI/CD失敗時

# improve/SKILL.md
役割: エビデンスベースの改善実装
- フォーカス: 品質の向上（パフォーマンス、アーキテクチャ）
- 使用場面: 計画的な改善、リファクタリング
```

#### 2. analyze vs scan の違いを CLAUDE.md に明記

**追加内容**:
```markdown
## コマンド選択ガイド

### 分析・検証コマンドの使い分け

| 目的 | コマンド | 特徴 |
|------|---------|------|
| 詳細な分析レポートが欲しい | `/analyze` | 改善ロードマップ付きYAMLレポート |
| 素早くセキュリティスコアを確認 | `/scan` | スコアリング + 脆弱性リスト |
| 品質問題を自動修正したい | `/ensure-quality` | make check-all相当 |
| エビデンスベースで改善したい | `/improve` | 測定→改善→検証 |
```

---

### 中期（1ヶ月以内）

#### 3. スキル使用例の追加

**対象**: 全スキル

**内容**:
- 各スキルのSKILL.mdに「他のスキルとの違い」セクションを追加
- 使用場面の具体例を追加

---

### 長期（四半期内）

#### 4. スキル依存関係図の作成

**内容**:
```mermaid
graph LR
    A[問題発見] --> B[scan]
    B --> C[analyze]
    C --> D[improve]
    D --> E[ensure-quality]
    E --> F[safe-refactor]
    F --> G[review-pr]
```

---

## 結論

### ✅ 良好な点

1. **明確な役割分担**: ほとんどのスキルは重複なく明確な役割を持つ
2. **段階的なワークフロー**: scan → analyze → improve → ensure-quality の流れが確立
3. **ナレッジベースの分離**: coding-standards, tdd-development, error-handlingが独立

### ⚠️ 改善が必要な点

1. **ensure-quality vs improve**: 役割の境界が不明瞭
2. **analyze vs scan**: ユーザーにとって違いが分かりにくい

### 📊 重複度評価

| カテゴリ | 重複度 | 評価 |
|---------|--------|------|
| ナレッジベース | 0% | 🟢 問題なし |
| コード品質管理 | 15% | 🟡 役割明確化推奨 |
| リファクタリング・デバッグ | 0% | 🟢 問題なし |
| レビュー | 0% | 🟢 問題なし |
| ドキュメント作成 | 0% | 🟢 問題なし |
| **全体平均** | **8%** | **🟢 良好** |

---

## 次のステップ

1. ensure-qualityとimproveのSKILL.mdを更新（役割明確化）
2. CLAUDE.mdに「コマンド選択ガイド」セクションを追加
3. 各スキルに「他のスキルとの違い」セクションを追加

---

**レポート完了**: 2026-01-25
