# CAGR推定フレームワーク — 投資分析におけるAI活用設計メモ

> 作成日: 2026-02-10

---

## 1. CAGR推定が投資において持つ抽象的意味

CAGR（年平均成長率）の推定とは、**「企業の将来キャッシュフローの軌道を一本の直線に圧縮する行為」**である。

### 本質的な3つの意味

| 意味 | 説明 |
|------|------|
| **複雑性の縮約** | 四半期ごとの凸凹・景気循環・経営判断のノイズを除去し、「年率何%で複利成長するか」に圧縮する。DCFモデルの分子（将来CF）の成長率を決定する行為 |
| **投資仮説の定量化** | 「いい会社だと思う」という定性判断を、検証可能な数値に変換する。競争優位の持続期間、市場拡大率、経営執行力への暗黙の主張を含む |
| **リスク・リターン天秤の片側** | CAGR（期待リターン）と達成確率（リスク）の天秤の片側を定めること。バリュエーション・下振れシナリオと組み合わせて初めて投資判断になる |

### 落とし穴

| 落とし穴 | 本質 |
|----------|------|
| 過去CAGRの外挿 | 成長の持続性（durability）の検証なしに将来を語ること |
| 単一シナリオ | 不確実性の幅を無視した「点の推定」に過ぎないこと |
| 売上CAGRだけ見る | 利益やFCFの成長率と乖離する可能性の無視 |

---

## 2. 複数要素の統合方法

### 基本構造：分解と再統合

CAGRは単一の数値だが、推定は**要素分解 → 個別推定 → 掛け合わせ**で行う。

```
企業価値のCAGR ≈ 売上成長 × マージン変化 × マルチプル変化

株主リターンCAGR = EPS成長率 + 配当利回り ± バリュエーション変化
EPS成長率 = 売上成長率 + マージン拡大率 + 自社株買い効果
```

### Step 1: 売上CAGR

```
売上CAGR = TAM成長率 + シェア変化率
```

- TAM成長率: 業界レポート、過去トレンドから推定
- シェア変化: 競争優位性の評価から推定

### Step 2: マージン推移 → 利益CAGR

```
営業利益CAGR = 売上CAGR + マージン変化の寄与
```

計算例:
- 売上CAGR 15%、営業利益率 20% → 25%（5年間）
- 売上5年後: 100 × 1.15^5 = 201
- 利益5年後: 201 × 0.25 = 50.3 / 利益現在: 100 × 0.20 = 20.0
- **利益CAGR = (50.3 / 20.0)^(1/5) - 1 ≈ 20.3%**

売上15%でもマージン拡大により利益CAGRは20%になる。

### Step 3: FCF CAGR

```
FCF = 営業利益 × (1 - 税率) + 減価償却 - 設備投資 - 運転資本増減
FCF CAGR = 利益CAGR + FCF転換率の改善
```

資本効率（Capital Intensity）の変化が鍵:

| フェーズ | 設備投資/売上比率 | FCF転換率 |
|----------|------------------|-----------|
| 成長投資期 | 高い（30%） | 低い |
| 成熟期 | 低下（15%） | 高い |

### 統合の具体例：SaaS企業

```
現在 → 5年後の推定

売上:       $1B → $2.5B      (CAGR 20%)
営業利益率: 15% → 30%        (規模の経済)
営業利益:   $150M → $750M    (CAGR 38%)
FCF転換率:  60% → 85%        (設備投資比率低下)
FCF:        $90M → $638M     (CAGR 48%)
EV/FCF:     50x → 25x        (成長鈍化でマルチプル収縮)
EV:         $4.5B → $15.9B   (CAGR 29%)

リターン分解:
  売上成長      +20%
  マージン拡大   +18%
  FCF転換改善    +10%
  マルチプル収縮  -11%
  ─────────────
  株価CAGR     ≈ 29%
```

### なぜ分解して統合するのか

1. **検証可能性** — 「売上20%成長」は業界データで検証できるが、「企業価値CAGR29%」は直接検証できない
2. **感度分析** — どの要素が最もリターンに効くか判明する
3. **シナリオ構築** — 各要素に楽観/悲観を設定し、リターンの幅を把握できる

---

## 3. AIにCAGR推定をさせるステップ設計

### 全体構造

```
Phase 1: 事実収集（Fact Gathering）
Phase 2: 過去の分解（Historical Decomposition）
Phase 3: 前提条件の構築（Assumption Building）
Phase 4: 推定の統合（CAGR Synthesis）
Phase 5: 検証と較正（Validation & Calibration）
```

### Phase 1: 事実収集

AIに**推論させる前に、事実だけを整理させる**。推定を混ぜさせない。

```
入力: 決算資料、10-K/10-Q、業界レポート

抽出項目:
├─ 財務データ（過去5-10年）
│   ├─ 売上、営業利益、純利益、FCF
│   ├─ マージン推移（粗利、営業、純利益、FCF）
│   ├─ 設備投資、R&D支出、運転資本
│   └─ 株式数の推移（希薄化/自社株買い）
│
├─ 事業構造
│   ├─ セグメント別売上・利益構成比
│   ├─ 地域別構成比
│   ├─ リカーリング vs 非リカーリング比率
│   └─ 顧客集中度
│
└─ 外部環境
    ├─ TAM（市場規模）と成長率
    ├─ 主要競合のシェアと成長率
    └─ 規制・マクロ環境の制約
```

### Phase 2: 過去の分解

過去の実績を**ドライバー別に分解**させる。将来推定のベースライン。

```
売上CAGR 18%
├─ 数量成長: +12%（ユーザー数増加）
├─ 価格成長: +4%（ARPU上昇）
└─ ミックス変化: +2%（高単価セグメント拡大）

営業利益率 12% → 22%（+10pp）
├─ 粗利率改善: +4pp（規模の経済）
├─ S&M比率低下: +3pp（効率化）
├─ R&D比率低下: +2pp（投資一巡）
└─ G&A比率低下: +1pp（固定費レバレッジ）
```

### Phase 3: 前提条件の構築

**直接CAGRを聞かず、個別の前提条件を構築させる。**

各前提に対して要求すること:
1. 基本シナリオの数値
2. その根拠（定量的な事実に基づく）
3. 上振れ/下振れの幅
4. 確信度（高/中/低）

対象項目:
- 売上成長率（TAM成長率、シェア変化、価格変化）
- マージン（粗利率改善、営業費用比率変化、限界利益率）
- 資本配分（設備投資比率、自社株買い、M&A）

### Phase 4: 推定の統合

Phase 3の前提を**機械的に組み合わせて**CAGRを算出。

```
出力フォーマット:
            悲観     基本     楽観
売上CAGR    8%      15%      22%
営業利益率  25%     30%      35%
営業利益CAGR 12%    22%      32%
FCF転換率   70%     80%      90%
FCF CAGR    15%     26%      37%

5年後FCF:   $1.0B   $1.6B    $2.3B
適正EV/FCF: 18x     22x      28x
適正EV:     $18B    $35B     $64B
現在EV:     $25B

5年リターン: -28%    +40%     +156%
年率リターン: -6%     +7%      +21%
```

### Phase 5: 検証と較正

AIの推定を**現実と突き合わせてバイアスを補正**。

| 検証項目 | 内容 |
|----------|------|
| ベースレート比較 | 同業界で過去20年間、同水準のCAGRを維持した企業の割合は？ |
| アナリスト予想との乖離 | コンセンサスとの差は何か？自分が正しい根拠は？ |
| 逆算検証 | 現在の株価が織り込んでいるCAGRはいくらか？ |
| 過去精度検証 | 5年前に同じ分析をしていたら実績とどれだけ乖離？ |
| プリモータム | この推定が大きく外れる最も可能性が高い原因は？ |

---

## 4. 設計原則とアンチパターン

### 設計原則

| 原則 | 理由 |
|------|------|
| 事実と推定を分離する | AIは事実と推論を混ぜやすい。Phaseを分けて制御する |
| 直接推定させない | 「CAGRは？」ではなく構成要素を個別に推定させる |
| 根拠を常に要求する | 数字だけでなく「なぜその数字か」を出力させる |
| 3シナリオ必須 | 点推定は過信を招く。幅を持たせる |
| ベースレートで較正 | AIは楽観バイアスを持ちやすい。業界統計で補正する |
| 計算過程を明示 | ブラックボックス化を防ぎ、どの前提が効いているか可視化する |

### アンチパターン

| やりがち | 問題 | 代替 |
|----------|------|------|
| 「この企業の将来性は？」 | 曖昧な回答しか返らない | 要素分解して個別に聞く |
| 過去CAGRをそのまま外挿 | 平均回帰を無視 | ドライバー分解+ベースレート |
| 単一シナリオで判断 | リスクの過小評価 | 3シナリオ+感度分析 |
| 全Phaseを一度に実行 | 推論が浅くなる | Phase別に段階実行 |

---

## 5. 今後の検討事項

- [ ] Phase 1-5を実装するエージェント/ワークフローの設計
- [ ] SEC EDGAR（`edgar`パッケージ）との統合による自動データ収集
- [ ] 市場データ（`market`パッケージ）との統合によるベースレート算出
- [ ] 推定結果の構造化出力フォーマット（Pydanticモデル）の定義
- [ ] 実際の企業でのパイロット実行と精度検証
