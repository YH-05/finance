# CAGR推定フレームワーク — 投資分析におけるAI活用設計メモ

> 作成日: 2026-02-10

---

## 1. CAGR推定が投資において持つ抽象的意味

CAGR（年平均成長率）の推定とは、**「企業の将来キャッシュフローの軌道を一本の直線に圧縮する行為」**である。

### 本質的な3つの意味

| 意味 | 説明 |
|------|------|
| **複雑性の縮約** | 四半期ごとの凸凹・景気循環・経営判断のノイズを除去し、「年率何%で複利成長するか」に圧縮する。DCFモデルの分子（将来CF）の成長率を決定する行為 |
| **投資仮説の定量化** | 「いい会社だと思う」という定性判断を、検証可能な数値に変換する。競争優位の持続期間、市場拡大率、経営執行力への暗黙の主張を含む |
| **リスク・リターン天秤の片側** | CAGR（期待リターン）と達成確率（リスク）の天秤の片側を定めること。バリュエーション・下振れシナリオと組み合わせて初めて投資判断になる |

### 落とし穴

| 落とし穴 | 本質 |
|----------|------|
| 過去CAGRの外挿 | 成長の持続性（durability）の検証なしに将来を語ること |
| 単一シナリオ | 不確実性の幅を無視した「点の推定」に過ぎないこと |
| 売上CAGRだけ見る | 利益やFCFの成長率と乖離する可能性の無視 |

---

## 2. 複数要素の統合方法

### 基本構造：分解と再統合

CAGRは単一の数値だが、推定は**要素分解 → 個別推定 → 掛け合わせ**で行う。

```
企業価値のCAGR ≈ 売上成長 × マージン変化 × マルチプル変化

株主リターンCAGR = EPS成長率 + 配当利回り ± バリュエーション変化
EPS成長率 = 売上成長率 + マージン拡大率 + 自社株買い効果
```

### Step 1: 売上CAGR

```
売上CAGR = TAM成長率 + シェア変化率
```

- TAM成長率: 業界レポート、過去トレンドから推定
- シェア変化: 競争優位性の評価から推定

### Step 2: マージン推移 → 利益CAGR

```
営業利益CAGR = 売上CAGR + マージン変化の寄与
```

計算例:
- 売上CAGR 15%、営業利益率 20% → 25%（5年間）
- 売上5年後: 100 × 1.15^5 = 201
- 利益5年後: 201 × 0.25 = 50.3 / 利益現在: 100 × 0.20 = 20.0
- **利益CAGR = (50.3 / 20.0)^(1/5) - 1 ≈ 20.3%**

売上15%でもマージン拡大により利益CAGRは20%になる。

### Step 3: FCF CAGR

```
FCF = 営業利益 × (1 - 税率) + 減価償却 - 設備投資 - 運転資本増減
FCF CAGR = 利益CAGR + FCF転換率の改善
```

資本効率（Capital Intensity）の変化が鍵:

| フェーズ | 設備投資/売上比率 | FCF転換率 |
|----------|------------------|-----------|
| 成長投資期 | 高い（30%） | 低い |
| 成熟期 | 低下（15%） | 高い |

### 統合の具体例：SaaS企業

```
現在 → 5年後の推定

売上:       $1B → $2.5B      (CAGR 20%)
営業利益率: 15% → 30%        (規模の経済)
営業利益:   $150M → $750M    (CAGR 38%)
FCF転換率:  60% → 85%        (設備投資比率低下)
FCF:        $90M → $638M     (CAGR 48%)
EV/FCF:     50x → 25x        (成長鈍化でマルチプル収縮)
EV:         $4.5B → $15.9B   (CAGR 29%)

リターン分解:
  売上成長      +20%
  マージン拡大   +18%
  FCF転換改善    +10%
  マルチプル収縮  -11%
  ─────────────
  株価CAGR     ≈ 29%
```

### なぜ分解して統合するのか

1. **検証可能性** — 「売上20%成長」は業界データで検証できるが、「企業価値CAGR29%」は直接検証できない
2. **感度分析** — どの要素が最もリターンに効くか判明する
3. **シナリオ構築** — 各要素に楽観/悲観を設定し、リターンの幅を把握できる

---

## 3. AIにCAGR推定をさせるステップ設計

### プロジェクトの位置づけ

本フレームワークは**AIに人間アナリストの投資判断を模倣させるPoC**である。最初から完璧なシステムを目指さず、段階的に検証する。

### 全体構造

```
前提: 模倣対象アナリストの投資哲学の注入（Phase 0）

Phase 1: 素材の整理（Material Organization）
Phase 2: 過去の分解（Historical Decomposition）
Phase 3: 前提条件の構築（Assumption Building）
Phase 4: 推定の統合（CAGR Synthesis）
Phase 5: 検証と較正（Validation & Calibration）
```

### 登場人物と入力の構造

```
入力アナリスト（複数）  →  銘柄推奨レポート群  ─┐
                                                ├→  AI  →  出力レポート  →  模倣対象アナリストが評価
10-K / 10-Q テキスト  ──────────────────────────┘
                                                ↑
                            模倣対象アナリストの投資哲学
                            （Phase 0 で注入）
```

| 要素 | 説明 |
|------|------|
| **入力アナリストレポート** | 複数のアナリストが各々の投資判断で書いた銘柄推奨レポート。企業の全情報が網羅されているわけではなく、個々の独自判断を含む |
| **10-K / 10-Q** | SEC EDGAR から取得した決算テキスト。客観的事実の情報源 |
| **模倣対象アナリスト** | 入力レポートの執筆者とは異なる。この人物の投資哲学・判断基準をAIで再現することが最終ゴール |
| **評価方法** | 模倣対象アナリストがAIレポートを読み「納得するかどうか」で判断（定量的評価手法は未確立） |

### Phase 0: 投資哲学の注入（設計上の急所）

競争優位性からCAGRへの接続は投資判断（投資の目利き、投資哲学）が入るところであり、ここが模倣の核心。

**未解決の設計課題**: 模倣対象の投資哲学をどうAIに渡すか？

| アプローチ | 方法 | Phase 1への影響 |
|-----------|------|----------------|
| **明示的** | 投資哲学をルールとして記述し、AIに従わせる | Phase 1は素材整理に集中すればよい |
| **暗黙的** | 模倣対象の過去レポートを複数読ませてパターンを模倣（few-shot） | Phase 1でレポートの構造化が必要 |

Phase 0の方針が定まらないと、Phase 1以降の抽出項目が確定しない。PoCでは両方試して効果を比較する。

### Phase 1: 素材の整理

AIに推論させる前に、**2種類の入力を性質に応じて整理させる**。

入力は性質が全く異なる2種類がある:

| 入力 | 性質 | 扱い方 |
|------|------|--------|
| 10-K / 10-Q | 事実の塊 | 事実として機械的に抽出 |
| アナリストレポート群 | 事実＋他人の判断の混合物 | 「市場の見解の地図」として整理 |

#### 10-K / 10-Q からの抽出（事実層）

```
抽出項目:
├─ 財務データ（過去5-10年）
│   ├─ 売上、営業利益、純利益、FCF
│   ├─ マージン推移（粗利、営業、純利益、FCF）
│   ├─ 設備投資、R&D支出、運転資本
│   └─ 株式数の推移（希薄化/自社株買い）
│
├─ 事業構造
│   ├─ セグメント別売上・利益構成比
│   ├─ 地域別構成比
│   ├─ リカーリング vs 非リカーリング比率
│   └─ 顧客集中度
│
└─ リスク要因
    ├─ 10-Kに記載されたリスクファクター
    └─ 規制・法的制約
```

#### アナリストレポート群からの抽出（見解層）

入力レポートは模倣対象の判断ではなく**他人の見解**であるため、以下を整理する:

```
抽出項目:
├─ 各アナリストの主張と根拠
│   ├─ 投資判断（買い/売り/中立）とその論拠
│   ├─ 注目している競争優位性
│   └─ 使用しているデータや前提条件
│
├─ コンセンサスと論点の地図
│   ├─ アナリスト間で一致している見解
│   ├─ 意見が分かれている論点
│   └─ 見落とされている可能性がある観点
│
└─ 定量的前提
    ├─ TAM（市場規模）の推定値とソース
    ├─ 成長率予測の範囲
    └─ バリュエーション前提
```

#### PoCでの簡略化

PoCでは抽出項目の網羅性より**「素材を先に整理する効果があるか」**の検証を優先する。Phase 2に進むための最低限:

- 売上の時系列（分解のベース）
- セグメント構成（ドライバー特定のため）
- マージン推移（利益CAGRへの接続）
- アナリストの主要な主張（見解の地図）

### Phase 2: 過去の分解

過去の実績を**ドライバー別に分解**させる。将来推定のベースライン。

```
売上CAGR 18%
├─ 数量成長: +12%（ユーザー数増加）
├─ 価格成長: +4%（ARPU上昇）
└─ ミックス変化: +2%（高単価セグメント拡大）

営業利益率 12% → 22%（+10pp）
├─ 粗利率改善: +4pp（規模の経済）
├─ S&M比率低下: +3pp（効率化）
├─ R&D比率低下: +2pp（投資一巡）
└─ G&A比率低下: +1pp（固定費レバレッジ）
```

### Phase 3: 前提条件の構築

**直接CAGRを聞かず、個別の前提条件を構築させる。**

各前提に対して要求すること:
1. 基本シナリオの数値
2. その根拠（定量的な事実に基づく）
3. 上振れ/下振れの幅
4. 確信度（高/中/低）

対象項目:
- 売上成長率（TAM成長率、シェア変化、価格変化）
- マージン（粗利率改善、営業費用比率変化、限界利益率）
- 資本配分（設備投資比率、自社株買い、M&A）

### Phase 4: 推定の統合

Phase 3の前提を**機械的に組み合わせて**CAGRを算出。

```
出力フォーマット:
            悲観     基本     楽観
売上CAGR    8%      15%      22%
営業利益率  25%     30%      35%
営業利益CAGR 12%    22%      32%
FCF転換率   70%     80%      90%
FCF CAGR    15%     26%      37%

5年後FCF:   $1.0B   $1.6B    $2.3B
適正EV/FCF: 18x     22x      28x
適正EV:     $18B    $35B     $64B
現在EV:     $25B

5年リターン: -28%    +40%     +156%
年率リターン: -6%     +7%      +21%
```

### Phase 5: 検証と較正

AIの推定を**現実と突き合わせてバイアスを補正**。

| 検証項目 | 内容 |
|----------|------|
| ベースレート比較 | 同業界で過去20年間、同水準のCAGRを維持した企業の割合は？ |
| アナリスト予想との乖離 | コンセンサスとの差は何か？自分が正しい根拠は？ |
| 逆算検証 | 現在の株価が織り込んでいるCAGRはいくらか？ |
| 過去精度検証 | 5年前に同じ分析をしていたら実績とどれだけ乖離？ |
| プリモータム | この推定が大きく外れる最も可能性が高い原因は？ |

---

## 4. 設計原則とアンチパターン

### 設計原則

| 原則 | 理由 |
|------|------|
| 事実と推定を分離する | AIは事実と推論を混ぜやすい。Phaseを分けて制御する |
| 入力の性質に応じて扱いを変える | 10-K（事実）とアナリストレポート（事実＋判断）は抽出方法が異なる |
| 投資哲学は素材整理と独立に注入する | 素材の整理（Phase 1）と判断のレンズ（Phase 0）を混ぜない |
| 直接推定させない | 「CAGRは？」ではなく構成要素を個別に推定させる |
| 根拠を常に要求する | 数字だけでなく「なぜその数字か」を出力させる |
| 3シナリオ必須 | 点推定は過信を招く。幅を持たせる |
| ベースレートで較正 | AIは楽観バイアスを持ちやすい。業界統計で補正する |
| 計算過程を明示 | ブラックボックス化を防ぎ、どの前提が効いているか可視化する |

### アンチパターン

| やりがち | 問題 | 代替 |
|----------|------|------|
| 「この企業の将来性は？」 | 曖昧な回答しか返らない | 要素分解して個別に聞く |
| 過去CAGRをそのまま外挿 | 平均回帰を無視 | ドライバー分解+ベースレート |
| 単一シナリオで判断 | リスクの過小評価 | 3シナリオ+感度分析 |
| 全Phaseを一度に実行 | 推論が浅くなる | Phase別に段階実行 |

---

## 5. 今後の検討事項

### 最優先（PoCの成立に必須）

- [ ] **Phase 0: 模倣対象アナリストの投資哲学をどう表現してAIに渡すか** — 明示的ルール方式 vs 暗黙的few-shot方式の比較検証
- [ ] 実際の企業でのパイロット実行（10-K + アナリストレポートで1社試す）
- [ ] 模倣対象アナリストによるAIレポートの評価プロセスの設計

### 次段階

- [ ] Phase 1-5を実装するエージェント/ワークフローの設計
- [ ] SEC EDGAR（`edgar`パッケージ）との統合による10-K/10-Qテキスト自動取得
- [ ] 市場データ（`market`パッケージ）との統合によるベースレート算出
- [ ] 推定結果の構造化出力フォーマット（Pydanticモデル）の定義
- [ ] 評価手法の定量化（「納得するかどうか」を超えた評価基準の確立）
