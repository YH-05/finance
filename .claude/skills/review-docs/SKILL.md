---
name: review-docs
description: ドキュメントの詳細レビューをサブエージェントで実行。/review-docs コマンドで使用。完全性・具体性・一貫性・測定可能性を評価。
allowed-tools: Read, Task
---

# ドキュメントレビュー

## 目的

このスキルは以下を提供します：

- **ドキュメント品質評価**: 完全性、具体性、一貫性、測定可能性の観点でドキュメントを評価
- **サブエージェント連携**: doc-reviewer エージェントを使用した詳細レビュー
- **改善提案**: 優先度付き改善点の提示

## いつ使用するか

### プロアクティブ使用（自動で使用を検討）

以下の状況では、ユーザーが明示的に要求しなくても使用を検討してください：

1. **ドキュメント作成後の品質チェック**
   - PRD（要求定義書）作成後
   - 設計書作成後
   - README/ガイドライン作成後

2. **ドキュメント改善時**
   - 「このドキュメントを改善したい」
   - 「レビューしてほしい」
   - 品質基準を満たしているか確認したい

### 明示的な使用（ユーザー要求）

- `/review-docs` コマンド
- 「ドキュメントをレビューして」などの直接的な要求

## プロセス

### ステップ 1: ドキュメントの存在確認

指定されたドキュメントが存在するか確認します。

```bash
# Read ツールでドキュメントの存在と内容を確認
Read <document_path>
```

### ステップ 2: doc-reviewer サブエージェント起動

doc-reviewer サブエージェントを起動してレビューを実行します。

Task ツールを使用して doc-reviewer サブエージェントを起動：

```yaml
subagent_type: "doc-reviewer"
description: "Document detailed review"
prompt: |
  [ドキュメントパス]を詳細にレビューしてください。

  以下の観点で評価してください:
  1. 完全性: 必要な項目が全て含まれているか
  2. 具体性: 曖昧な表現がないか
  3. 一貫性: 他のドキュメントと整合しているか
  4. 測定可能性: 成功指標が測定可能か(PRD の場合)

  レビューレポートを作成してください。
```

### ステップ 3: レビュー結果の要約

サブエージェントが作成したレビューレポートの要点を抽出し、ユーザーに報告します。

## 使用例

### 例1: PRD（要求定義書）のレビュー

**入力**:
```bash
/review-docs docs/product-requirements.md
```

**処理**:
1. docs/product-requirements.md の存在確認
2. doc-reviewer サブエージェント起動
3. レビューレポート作成
4. 要約をユーザーに報告

**期待される出力**:
```markdown
# ドキュメントレビュー結果

## ドキュメント: product-requirements.md

### 主な改善点

1. 成功指標が曖昧（例: "ユーザー満足度を向上"） (優先度: 高)
2. 技術的制約が未記載 (優先度: 中)
3. スケジュールが具体的な日付で記載されていない (優先度: 低)

### 総合評価

3/5

### 次のアクション

- 成功指標を定量的に定義（例: "NPS 50→60"）
- 技術的制約セクションを追加

詳細なレポートはサブエージェントの出力を参照してください。
```

---

### 例2: アーキテクチャ設計書のレビュー

**入力**:
```bash
/review-docs docs/architecture-design.md
```

**処理**:
1. docs/architecture-design.md の存在確認
2. doc-reviewer サブエージェント起動（一貫性チェック重視）
3. レビューレポート作成

**期待される出力**:
```markdown
# ドキュメントレビュー結果

## ドキュメント: architecture-design.md

### 主な改善点

1. データフロー図が不足 (優先度: 高)
2. セキュリティ考慮事項が不十分 (優先度: 高)
3. スケーラビリティの記載が曖昧 (優先度: 中)

### 総合評価

3.5/5

### 次のアクション

- Mermaid でデータフロー図を追加
- セキュリティセクションを拡充（認証・認可・暗号化）

詳細なレポートはサブエージェントの出力を参照してください。
```

---

### 例3: README のレビュー

**入力**:
```bash
/review-docs README.md
```

**処理**:
1. README.md の存在確認
2. doc-reviewer サブエージェント起動（完全性・具体性重視）
3. レビューレポート作成

**期待される出力**:
```markdown
# ドキュメントレビュー結果

## ドキュメント: README.md

### 主な改善点

1. インストール手順が不明確 (優先度: 高)
2. 使用例が少ない（1つのみ） (優先度: 中)
3. トラブルシューティングセクションが欠落 (優先度: 低)

### 総合評価

4/5

### 次のアクション

- インストール手順を段階的に記載
- 使用例を3-4個に増やす
- FAQ/トラブルシューティングセクションを追加

詳細なレポートはサブエージェントの出力を参照してください。
```

## 品質基準

このスキルの成果物は以下の品質基準を満たす必要があります：

### 必須（MUST）

- [ ] 指定されたドキュメントが存在し、読み取り可能
- [ ] doc-reviewer サブエージェントが正しく起動
- [ ] レビュー結果に改善点が含まれている
- [ ] レビュー結果に総合評価（1-5）が含まれている
- [ ] レビュー結果に次のアクションが含まれている

### 推奨（SHOULD）

- 改善点に優先度（高/中/低）が付与されている
- 改善点が具体的で実行可能
- 総合評価の根拠が明確
- レビュー時間の目安が提示されている

## 出力フォーマット

```markdown
# ドキュメントレビュー結果

## ドキュメント: [ファイル名]

### 主な改善点

1. [改善点 1] (優先度: 高/中/低)
2. [改善点 2] (優先度: 高/中/低)
3. [改善点 3] (優先度: 高/中/低)

### 総合評価

[1-5]/5

### 次のアクション

- [推奨対応 1]
- [推奨対応 2]

詳細なレポートはサブエージェントの出力を参照してください。
```

## 注意事項

- レビューは詳細な分析のため、数分かかる場合があります
- サブエージェントは独立したコンテキストで動作するため、メインエージェントのコンテキストは消費しません
- ドキュメントの種類（PRD、設計書、README等）に応じて評価観点が調整されます

## エラーハンドリング

### ドキュメントが見つからない

**原因**: 指定されたパスにドキュメントが存在しない

**対処法**:
1. パスを確認
2. Glob ツールでドキュメントを検索
3. ユーザーに正しいパスを確認

**ユーザーへのメッセージ**:
```
指定されたドキュメントが見つかりません: [path]

docs/ ディレクトリ内のドキュメント一覧:
[Glob結果]

正しいパスを指定してください。
```

---

### サブエージェント起動失敗

**原因**: doc-reviewer エージェントが存在しない、または起動できない

**対処法**:
1. doc-reviewer エージェントの存在を確認
2. Task ツールのパラメータを確認
3. フォールバック処理（簡易レビュー）を実行

---

### レビュー結果が不完全

**原因**: サブエージェントが期待される形式で出力していない

**対処法**:
1. サブエージェントの出力を確認
2. 不足している項目を特定
3. ユーザーに部分的な結果を報告

## 完了条件

このスキルは以下の条件を満たした場合に完了とする：

- [ ] ドキュメントが正しく読み込まれている
- [ ] doc-reviewer サブエージェントが起動している
- [ ] レビュー結果が標準フォーマットで出力されている
- [ ] 改善点が優先度付きで提示されている
- [ ] 総合評価（1-5）が提示されている
- [ ] 次のアクションが具体的に提示されている

## 関連スキル

- **prd-writing**: PRD作成ガイドライン（レビュー基準の参照）
- **functional-design**: 機能設計書作成ガイドライン（レビュー基準の参照）
- **architecture-design**: アーキテクチャ設計書作成ガイドライン（レビュー基準の参照）

## 関連エージェント

- **doc-reviewer**: ドキュメント品質レビューの実行エージェント

## 参考資料

- `.claude/agents/doc-reviewer/`: doc-reviewer エージェント定義
- `docs/coding-standards.md`: コーディング規約
- `docs/development-process.md`: 開発プロセス
