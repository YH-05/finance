# Issue Refinement Templates

Issue ブラッシュアップ時のテンプレート集です。

## 1. Issue テンプレート（改善の基準）

```markdown
## 概要
[機能・問題の概要を1-2文で簡潔に記述]

## 詳細
[実装の詳細、技術的な背景、コンテキストを記述]

## 受け入れ条件
- [ ] [測定可能な条件1: 具体的な数値や状態を含む]
- [ ] [測定可能な条件2: 「〜ができること」形式]
- [ ] [測定可能な条件3: テスト可能な表現]

## 備考
[補足情報、関連 Issue、参考リンクなど]
```

## 2. 差分表示形式

```markdown
## Issue #{number}: {title}

### タイトル
- **改善前**: {old_title}
- **改善後**: {new_title}

### 本文の変更

#### 概要
```diff
- [改善前の概要]
+ [改善後の概要]
```

#### 受け入れ条件
```diff
- [ ] 改善前の条件1
- [ ] 改善前の条件2
+ [ ] 改善後の条件1（測定可能）
+ [ ] 改善後の条件2（測定可能）
+ [ ] 改善後の条件3（追加）
```
```

## 3. 改善サマリー

```markdown
### 改善サマリー

- **タイトル改善**: より具体的な表現に変更
- **概要改善**: 問題の具体化と影響範囲の明記
- **受け入れ条件**: 4 条件を測定可能な形式に変換
  - 曖昧 → 具体的: 2 件
  - 新規追加: 2 件
```

## 4. 確認情報サマリー

```markdown
## 確認した詳細情報

- **目的**: 運用効率化
- **スコープ**: 基本機能のみ、エラーハンドリング、テスト実装
- **連携**: 既存機能を利用
- **優先度**: 中（P2）

### ユースケース
{ユーザーの自由記述}

### 受け入れ条件の詳細
{ユーザーの自由記述}

### 実装時の注意点
{ユーザーの自由記述}

### 関連 Issue
- #123: {タイトル}
- #456: {タイトル}

この情報で改善案を生成してよろしいですか？
```

## 5. 結果レポート

```markdown
## ブラッシュアップ結果

### 更新した Issue

| Issue | タイトル | 改善内容 |
|-------|----------|----------|
| [#123](URL) | 新しいタイトル | 本文全体を改善 |
| [#124](URL) | 新しいタイトル | 受け入れ条件を改善 |

### スキップした Issue

| Issue | 理由 |
|-------|------|
| [#125](URL) | ユーザーによりスキップ |

### 改善サマリー

- **タイトル改善**: 2 件
- **概要改善**: 2 件
- **受け入れ条件改善**: 3 件（計 8 条件を明確化）

## 次のステップ

- `/issue` で project.md との同期状況を確認
- 改善した Issue の実装を開始
```

## 6. 更新履歴コメント

Issue に追加するコメント形式:

```markdown
## Issue ブラッシュアップ

このIssueは `/issue-refine` コマンドにより以下の改善が行われました:

- タイトル: より具体的な表現に変更
- 受け入れ条件: 測定可能な形式に変更

---
Generated by Claude Code
```

## 7. 受け入れ条件の書き方ガイド

### 曖昧 → 測定可能 変換表

| 曖昧な表現 | 測定可能な表現 |
|-----------|---------------|
| パフォーマンスが改善される | 平均レスポンスタイムが 500ms 以下になる |
| テストが通る | `make test` が成功する |
| ドキュメントがある | README.md に使用例が記載されている |
| 使いやすい | フォーム入力が 3 ステップ以内で完了する |
| バグが直る | エラーログに該当例外が出力されない |
| エラーハンドリングがある | 不正入力時に適切なエラーメッセージが表示される |
| ログが出力される | INFO レベルで処理開始/完了がログ出力される |
| セキュリティが確保される | 認証されていないリクエストが 401 を返す |
| 互換性がある | Python 3.12 以上で動作する |
| 保守性が向上する | 循環参照複雑度が 10 以下になる |

### 良い受け入れ条件の特徴

1. **具体的な数値を含む**: 「500ms以下」「3ステップ以内」
2. **検証可能**: `make test` で確認できる
3. **達成/未達成が明確**: 曖昧さがない
4. **単一責任**: 1条件1項目
