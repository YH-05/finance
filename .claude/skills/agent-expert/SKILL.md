---
name: agent-expert
description: "Create and optimize specialized Claude Code agents. Expertise in agent design, prompt engineering, domain modeling, and best practices for claude-code-templates system. Use PROACTIVELY when designing new agents or improving existing ones."
allowed-tools: Read, Write, Glob, Grep, AskUserQuestion, Task
---

# Agent Expert

専門的なClaude Codeエージェントの設計・最適化を行うスキルです。

## 目的

このスキルは以下の場合に使用します：

- **新規エージェントの作成**: 特定のドメインや目的に特化したエージェントを設計
- **既存エージェントの改善**: パフォーマンス、明確性、エラー処理の最適化
- **エージェントのレビュー**: 品質保証とベストプラクティスへの準拠確認

## いつ使用するか

### プロアクティブ使用（自動で使用を検討）

以下の状況では、ユーザーが明示的に要求しなくても使用を検討してください：

1. **エージェント設計の議論**
   - 「〜エージェントを作りたい」
   - 「〜を自動化するエージェントはどう？」
   - 新しい専門領域のエージェントの必要性が明らか

2. **エージェント品質の問題**
   - エージェントが期待通りに動作しない
   - エージェントの出力が不安定
   - エージェント間の責任範囲が曖昧

3. **エージェントシステムの拡張**
   - 新しいワークフローへのエージェント統合
   - エージェント間の調整が必要
   - 既存エージェントの機能拡張

### 明示的な使用（ユーザー要求）

- `/agent-expert` コマンド
- 「エージェントを作って」「エージェントを改善して」などの直接的な要求

## プロセス

### 1. 要件の分析

エージェント作成前に以下を明確化します：

```bash
# 既存のエージェントを確認
ls -la .claude/agents/
# 類似エージェントの内容を確認
cat .claude/agents/similar-agent.md
```

- **ドメイン境界**: エージェントの専門領域と責任範囲
- **入力/出力**: 受け取る情報と提供する成果物
- **トリガー条件**: いつ、どのような状況で使用されるか
- **制約**: セキュリティ、パフォーマンス、倫理的な制限

### 2. エージェント設計

AskUserQuestion ツールを使用して、以下を確認：

- エージェントの名前（kebab-case）
- 主要な責任と専門性
- 利用可能なツール
- 想定される使用シナリオ

### 3. エージェントの実装

標準的なエージェント構造：

```markdown
---
name: agent-name
category: category-name
description: Short description for the Task tool
---

# Agent Purpose and Context

## When to Use This Agent

[Specific trigger conditions]

## Process

1. Step one
2. Step two
...

## Examples

[3-4 realistic usage examples with context and expected outcomes]

## Guidelines

- Guideline 1
- Guideline 2
...
```

### 4. テストとバリデーション

作成後の確認項目：

- [ ] フロントマターが正しく設定されている
- [ ] トリガー条件が明確
- [ ] 実用的な例が3-4個含まれている
- [ ] ツールの使用方法が明記されている
- [ ] 制約事項とセキュリティ考慮が含まれている

## リソース

このスキルには以下のリソースが含まれています：

### ./guide.md
エージェント設計の詳細ガイド：
- エージェント設計原則
- カテゴリ分類
- プロンプトエンジニアリング
- 品質保証基準
- トラブルシューティング

### ./template.md
標準的なエージェントテンプレート：
- フロントマター構造
- セクション構成
- 例の書き方
- コメント付きガイド

## 使用例

### 新規エージェント作成

```bash
# 1. 要件を明確化（AskUserQuestion使用）
# 2. 既存エージェントを調査
# 3. テンプレートを使用して作成
# 4. バリデーション実行
```

### 既存エージェント改善

```bash
# 1. 既存エージェントを読み込み
# 2. 問題点を特定
# 3. ガイドラインに基づいて修正
# 4. テスト実行
```

## ベストプラクティス

1. **明確な境界**: エージェントの責任範囲を明確に定義
2. **実践的な例**: 現実的な使用シナリオを含める
3. **セキュリティ**: 適切な制約と検証を実装
4. **テスト可能性**: エージェントの動作を検証可能に設計
5. **ドキュメント**: 使用方法と制限を明確に文書化

## 注意事項

- エージェントは`.claude/agents/`ディレクトリに配置
- ファイル名はエージェント名と一致（kebab-case.md）
- フロントマターのnameとファイル名を一致させる
- カテゴリは既存のものから選択、または新規作成
- descriptionはTask toolに表示されるため簡潔に

## トラブルシューティング

### エージェントが呼び出されない
- description に適切なトリガーキーワードが含まれているか確認
- カテゴリが適切に設定されているか確認

### エージェントが期待通りに動作しない
- プロンプトが具体的で明確か確認
- 例が実用的で理解しやすいか確認
- ツールの使用方法が正しく説明されているか確認

### エージェント間の責任が重複
- 各エージェントの境界を明確に定義
- より特化したエージェントを優先
- 必要に応じてエージェントを統合または分割
