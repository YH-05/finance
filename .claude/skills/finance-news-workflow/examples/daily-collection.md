# 日次収集パターン

毎日の金融ニュース収集における標準的な使用パターンです。

## 基本的な日次収集

### 標準実行

```bash
/finance-news-workflow
```

デフォルトで以下の設定で実行されます：

| パラメータ | 値 | 説明 |
|-----------|-----|------|
| --days | 7 | 過去7日間の記事 |
| --top-n | 10 | 各テーマ最新10件 |
| --themes | all | 全テーマ（11サブテーマ） |

### 期待される出力

```
================================================================================
                    /finance-news-workflow 開始
================================================================================

## Phase 1: Python CLI前処理（30秒以内）
- テーマ設定: data/config/finance-news-themes.json
- GitHub CLI: 認証済み
- RSS記事取得: 85件（ローカルデータから）
- 日付フィルタ後: 42件
- 重複スキップ: 7件
- Top-N選択後: 35件（各テーマ最大10件）
- セッションファイル: .tmp/news-20260209-090000.json

## Phase 2: Issue一括作成（RSS要約モード、4分以内）
| テーマ | 対象 | 作成 | 失敗 |
|--------|------|------|------|
| Index | 6 | 6 | 0 |
| Stock | 8 | 8 | 0 |
| Sector | 4 | 4 | 0 |
| Macro (CNBC) | 5 | 5 | 0 |
| Macro (Other) | 3 | 3 | 0 |
| AI (CNBC) | 2 | 2 | 0 |
| AI (NASDAQ) | 3 | 3 | 0 |
| AI (Tech) | 2 | 2 | 0 |
| Finance (CNBC) | 1 | 1 | 0 |
| Finance (NASDAQ) | 0 | 0 | 0 |
| Finance (Other) | 1 | 1 | 0 |

## Phase 3: 結果報告
- 総投稿数: 35件
- 処理モード: RSS要約モード（needs-review付き）
- 実行時間: 3分45秒

================================================================================
                    /finance-news-workflow 完了
================================================================================
```

## 推奨パラメータ設定

### 朝の収集（推奨）

```bash
# 朝8-9時に実行（前日の記事を収集）
/collect-finance-news --since 1d
```

### 週末明けの収集

```bash
# 月曜日朝に実行（週末分を収集）
/collect-finance-news --since 3d
```

### 長期休暇明け

```bash
# 長期休暇後に実行（1週間分を収集）
/collect-finance-news --since 7d --limit 100
```

## 運用のベストプラクティス

### 1. 実行タイミング

| タイミング | 推奨パラメータ | 理由 |
|-----------|---------------|------|
| 平日朝 | `--since 1d` | 前日の記事を効率的に収集 |
| 月曜朝 | `--since 3d` | 土日分を含めて収集 |
| 祝日明け | `--since 2d` 以上 | 休日中の記事を漏れなく収集 |

### 2. 日次収集の推奨フロー

```
1. /collect-finance-news 実行
2. GitHub Project #15 で投稿を確認
3. 重要ニュースをピックアップ
4. 必要に応じてラベル付け
```

### 3. 自動化のヒント

cron や GitHub Actions で定期実行する場合：

```bash
# 毎朝9時に実行
0 9 * * * cd /path/to/finance && claude "/collect-finance-news"
```

## エラー時の対処

### ネットワークエラーが発生した場合

```bash
# 少し待ってから再実行
/collect-finance-news
```

自動リトライ（最大3回）が組み込まれています。

### 記事が0件の場合

1. RSSフィードが正常に動作しているか確認
2. `--since` の期間を広げて再試行

```bash
/collect-finance-news --since 3d
```

## 関連パターン

- [テーマフィルタリングパターン](./theme-filtering.md): 特定テーマのみ収集
- [dry-runモードパターン](./dry-run.md): 投稿前の確認
