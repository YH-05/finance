# 日次収集パターン

毎日の金融ニュース収集における標準的な使用パターンです。

## 基本的な日次収集

### 標準実行

```bash
/collect-finance-news
```

デフォルトで以下の設定で実行されます：

| パラメータ | 値 | 説明 |
|-----------|-----|------|
| --since | 1d | 過去24時間以内の記事 |
| --project | 15 | GitHub Project #15 |
| --limit | 50 | 最大50件 |
| --themes | all | 全テーマ（6種類） |

### 期待される出力

```
================================================================================
                    /collect-finance-news 開始
================================================================================

## Phase 1: 初期化
- テーマ設定: data/config/finance-news-themes.json ✓
- RSS MCP: ツール確認完了 ✓
- GitHub CLI: 認証済み ✓

## Phase 2: データ準備
- RSS記事取得: 42件
- 既存Issue取得: 15件（重複チェック用）
- 一時ファイル保存: .tmp/news-collection-20260122T0900.json

## Phase 3: テーマ別収集（並列実行）
| テーマ | 取得件数 | 投稿件数 | 重複 |
|--------|---------|---------|------|
| Index | 8 | 6 | 2 |
| Stock | 12 | 10 | 2 |
| Sector | 5 | 4 | 1 |
| Macro Economics | 10 | 8 | 2 |
| AI | 4 | 4 | 0 |
| Finance | 3 | 3 | 0 |

## Phase 4: 結果報告
- 総取得記事数: 42件
- 総投稿数: 35件
- 重複スキップ: 7件
- 実行時間: 2分15秒

================================================================================
                    /collect-finance-news 完了
================================================================================
```

## 推奨パラメータ設定

### 朝の収集（推奨）

```bash
# 朝8-9時に実行（前日の記事を収集）
/collect-finance-news --since 1d
```

### 週末明けの収集

```bash
# 月曜日朝に実行（週末分を収集）
/collect-finance-news --since 3d
```

### 長期休暇明け

```bash
# 長期休暇後に実行（1週間分を収集）
/collect-finance-news --since 7d --limit 100
```

## 運用のベストプラクティス

### 1. 実行タイミング

| タイミング | 推奨パラメータ | 理由 |
|-----------|---------------|------|
| 平日朝 | `--since 1d` | 前日の記事を効率的に収集 |
| 月曜朝 | `--since 3d` | 土日分を含めて収集 |
| 祝日明け | `--since 2d` 以上 | 休日中の記事を漏れなく収集 |

### 2. 日次収集の推奨フロー

```
1. /collect-finance-news 実行
2. GitHub Project #15 で投稿を確認
3. 重要ニュースをピックアップ
4. 必要に応じてラベル付け
```

### 3. 自動化のヒント

cron や GitHub Actions で定期実行する場合：

```bash
# 毎朝9時に実行
0 9 * * * cd /path/to/finance && claude "/collect-finance-news"
```

## エラー時の対処

### ネットワークエラーが発生した場合

```bash
# 少し待ってから再実行
/collect-finance-news
```

自動リトライ（最大3回）が組み込まれています。

### 記事が0件の場合

1. RSSフィードが正常に動作しているか確認
2. `--since` の期間を広げて再試行

```bash
/collect-finance-news --since 3d
```

## 関連パターン

- [テーマフィルタリングパターン](./theme-filtering.md): 特定テーマのみ収集
- [dry-runモードパターン](./dry-run.md): 投稿前の確認
