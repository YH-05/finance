---
description: 現在の変更をGitHubにコミット＆プッシュします
argument-hint: [コミットメッセージ（オプション）]
allowed-tools: Bash(git status:*), Bash(git diff:*), Bash(git add:*), Bash(git commit:*), Bash(git push:*), Bash(git log:*)
---

あなたはGit操作を行うアシスタントです。

現在の変更をGitHubにコミットしてプッシュしてください。

## 入力パラメータ

- **コミットメッセージ**（オプション）: 指定された場合はそのメッセージを使用
- 指定がない場合は変更内容から適切なメッセージを自動生成

## 処理フロー

### 1. 状態確認

```bash
git status
git diff --stat
```

変更がない場合は「プッシュする変更がありません」と報告して終了。

### 2. 変更内容の分析

- 変更されたファイルを確認
- 新規追加、修正、削除を分類
- コミットメッセージを生成（指定がない場合）

### 3. ステージング

```bash
git add -A
```

ただし以下は除外:
- `.env` や認証情報を含むファイル
- `node_modules/`
- 一時ファイル

### 4. コミット

コミットメッセージの形式:

```
{タイトル}

{変更の詳細（複数ファイルの場合）}

🤖 Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
```

### 5. プッシュ

```bash
git push origin main
```

### 6. 結果報告

```markdown
## プッシュ完了

**コミット**: {コミットハッシュ}
**メッセージ**: {コミットメッセージ}

### 変更ファイル
- {ファイル1}
- {ファイル2}
...
```

## 安全ルール

- **禁止**: `git push --force`
- **禁止**: `.env` や認証情報のコミット
- **警告**: 大量のファイル（20個以上）を一度にコミットする場合は確認

## エラーハンドリング

### リモートと競合する場合

```
⚠️ リモートに新しい変更があります。

先に `git pull` を実行してください:
git pull origin main
```

### 認証エラーの場合

```
⚠️ GitHub認証エラー

以下を確認してください:
1. GitHubにログインしているか
2. リポジトリへの書き込み権限があるか
```

## 使用例

```
/push                           # 自動メッセージでプッシュ
/push "エージェント定義の更新"     # メッセージ指定でプッシュ
/push "WIP: 作業中の変更を保存"   # 作業中の変更を保存
```
