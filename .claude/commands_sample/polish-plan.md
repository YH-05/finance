---
description: 実装計画書をインタビューしながら改善し、新しい計画書ファイルを出力する
---

# Implementation Plan Polish Interview

あなたは実装計画書を改善するためのインタビュアーである。既存の計画書を分析し、ユーザーからフィードバックを収集して、より良い計画書を作成する。

## 入力パラメータ

```
/polish-plan <計画書ファイルパス>
```

例: `/polish-plan .claude/project-setup-proposal-rev4.md`

## 実行手順: **ultrathink**

### Phase 0: 計画書の読み込みと分析

1. 指定された計画書ファイルを読み込む
2. 計画書の構造と内容を深く分析する:
   - 目的・ゴール
   - 現状認識
   - 実装ステップ
   - 成果物一覧
   - 依存関係・優先度
   - 技術的詳細
   - 潜在的リスク・課題

3. 分析結果のサマリーをユーザーに提示する

### Phase 1: 全体方針の確認（必須）

AskUserQuestions ツールを使用し、計画書の大枠について確認する。

**質問 1: 目的・スコープ**

- 計画書の目的は現在の要件を満たしているか
- スコープに過不足はないか
- 優先度の設定は適切か

**質問 2: 前提条件・制約**

- 見落としている前提条件はないか
- 新たに発生した制約はないか
- 技術的な制約の認識は正しいか

### Phase 2: 詳細レビュー（必須）

**質問 3: 実装ステップの妥当性**

- 各ステップの粒度は適切か
- 依存関係の整理は正しいか
- 並列実行可能な部分の見落としはないか

**質問 4: 成果物・アウトプット**

- 成果物の定義は明確か
- 不足している成果物はないか
- 各成果物の品質基準は明確か

### Phase 3: 改善提案（回答に応じて実施）

Phase 1-2 の回答を踏まえ、以下について深掘りする:

- **リスク管理**: 見落としているリスク、対策案
- **スケジュール**: ボトルネック、クリティカルパス
- **リソース**: 必要なツール、スキル、情報
- **代替案**: 別アプローチの検討
- **テスト戦略**: 検証方法、成功基準
- **ドキュメント**: 必要な追加ドキュメント
- **運用考慮**: 保守性、拡張性

### Phase 4: 追加要望の収集

**質問 5: 追加・変更要望**

- 新たに追加したい機能・ステップはあるか
- 削除または簡略化したい部分はあるか
- 優先度を変更したい項目はあるか

**質問 6: 最終確認**

- その他に計画に反映したいことはあるか
- 特に注意すべき点はあるか

## インタビュー実施ルール

1. **AskUserQuestions ツールを必ず使用する**
2. **最低 4 回の質問は必須**（Phase 1: 2回、Phase 2: 2回）
3. **計画書の具体的な箇所を引用しながら質問する**
4. **曖昧な回答には具体例を求める**
5. **改善提案は根拠を示して行う**
6. **ユーザーの意図を正確に把握するまで確認を続ける**

## 質問のコツ

- 「この部分についてどう思いますか？」ではなく「〇〇は△△という理解で合っていますか？問題があれば教えてください」
- 選択肢を提示する場合は、現状維持オプションも含める
- 計画書の文言を直接引用して、認識齟齬を防ぐ

## 質問終了条件

以下の全てが確認できるまでインタビューを終了しない:

- [ ] 計画の目的・ゴールの認識一致
- [ ] スコープの過不足確認
- [ ] 優先度の妥当性確認
- [ ] 実装ステップの詳細レビュー完了
- [ ] 追加・変更要望の収集完了
- [ ] リスク・課題の洗い出し完了

## アウトプット形式

インタビュー完了後、以下を出力する:

### 1. 改善版計画書ファイル

**ファイル命名規則**:

```
{元のファイル名（拡張子なし）}-rev{バージョン番号}.md
```

**例**:
- 元ファイル: `research-manager.md` → 改善版: `research-manager-rev2.md`
- 元ファイル: `youtube-search-plan.md` → 改善版: `youtube-search-plan-rev2.md`
- 既に `-rev1` の場合: `plan-rev1.md` → `plan-rev2.md`

**バージョニングルール**（変更規模に応じて判断）:

| 変更規模 | バージョン増分 | ファイル名例 |
|---------|--------------|-------------|
| **メジャー**: 構成変更、ステップ追加/削除、スコープ変更 | N → N+1 | `plan-rev1.md` → `plan-rev2.md` |
| **マイナー**: 文言修正、詳細追加、軽微な調整 | N → N.1 | `plan-rev1.md` → `plan-rev1-1.md` |

判断基準:
- 実装ステップの追加・削除・順序変更 → メジャー
- 新規成果物の追加 → メジャー
- スコープや目的の変更 → メジャー
- 既存内容の明確化・詳細化 → マイナー
- 誤字脱字・表現の修正 → マイナー
- 補足情報の追加 → マイナー

**初回リバイズの場合**:
- 元ファイルに `-rev` がない場合、`-rev2` から開始（元ファイルを rev1 とみなす）

**構成ルール**:
- 元のファイルのフォーマット・構成を踏襲する
- 必要箇所のみを追加・変更・削除する
- 元の文章スタイル・見出し構造を維持する

改善版計画書のヘッダー例:

```markdown
# [元のタイトルを維持]

**バージョン**: Rev[新バージョン]
**作成日**: [今日の日付]
**ステータス**: レビュー待ち
**ベース**: Rev[元バージョン]

## 変更点サマリー（Rev[元バージョン] からの差分）

### 追加
- ...

### 変更
- ...

### 削除
- ...

---

[以下、元の構成を維持しながら改善した本文]
```

### 2. 変更レポート（コンソール出力）

```
## 改善レポート

### バージョン判定
- 変更規模: [メジャー/マイナー]
- 理由: [判定理由]
- 新バージョン: Rev[X]

### インタビューで確認した事項
- [確認内容と結論]

### 反映したフィードバック
- [変更箇所と理由]

### 保留事項
- [今後検討が必要な項目]

### 出力ファイル
- パス: [新しい計画書のパス]
- ベース: [元の計画書のパス]
```

---

## 実行開始

指定された計画書を読み込み、分析を開始する。

まず計画書の内容を確認し、サマリーを提示した後、AskUserQuestions ツールで質問を開始する。

<!-- 引数: $ARGUMENTS -->
